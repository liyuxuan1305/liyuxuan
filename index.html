<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æå®‡è½©çš„ä¸ªäººä¸»é¡µ</title>
    <style>
        body { 
            font-family: 'PingFang SC', sans-serif; 
            background: url('beijing.jpg') no-repeat center center fixed; 
            background-size: cover;
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; overflow: hidden;
            transition: filter 0.5s ease;
        }

        /* é†‰é…’æ™ƒåŠ¨ç‰¹æ•ˆ */
        @keyframes dizzy {
            0% { transform: translate(0,0) rotate(0); }
            20% { transform: translate(-10px, 5px) rotate(-2deg); }
            40% { transform: translate(10px, -5px) rotate(2deg); }
            60% { transform: translate(-5px, -10px) rotate(-1deg); }
            80% { transform: translate(5px, 10px) rotate(1deg); }
            100% { transform: translate(0,0) rotate(0); }
        }
        .dizzy-effect { animation: dizzy 0.5s infinite; filter: blur(1px); }

        /* çƒŸé›¾ç‰¹æ•ˆ */
        #smoke-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(100, 100, 100, 0.5); opacity: 0; pointer-events: none;
            transition: opacity 1s; z-index: 100;
        }

        .card { 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); 
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            width: 90%; max-width: 400px; padding: 40px; text-align: center; position: relative; z-index: 10;
        }

        /* åŒåŸæ—¶é—´æ ·å¼ */
        .world-clock {
            display: flex; justify-content: space-around; margin-bottom: 20px;
            font-size: 12px; color: #666; background: rgba(0,0,0,0.05);
            padding: 10px; border-radius: 10px;
        }
        .clock-item b { display: block; font-size: 14px; color: #0070f3; }

        .avatar { 
            width: 120px; height: 120px; border-radius: 50%; 
            margin: 0 auto 20px; overflow: hidden; border: 3px solid #fff;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        
        h1 { margin: 10px 0; color: #333; font-size: 28px; }
        .typewriter { color: #0070f3; font-weight: bold; margin-bottom: 15px; min-height: 1.2em; }
        
        .tag { 
            display: inline-block; background: #333; color: #fff; padding: 5px 15px; 
            border-radius: 20px; font-size: 14px; margin: 5px; cursor: pointer;
        }
        
        .btn-group { display: flex; gap: 10px; margin-top: 25px; }
        .wechat-btn { flex: 1; background: #07c160; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .surprise-btn { flex: 1; background: #f39c12; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        .note { position: fixed; pointer-events: none; font-size: 24px; animation: move-up 4s linear forwards; z-index: 1; }
        @keyframes move-up {
            0% { transform: translateY(100vh); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }

        #modal-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); justify-content: center; align-items: center; 
            z-index: 999; flex-direction: column; color: white;
        }

        .music-ctrl { position: absolute; top: 15px; right: 15px; cursor: pointer; font-size: 20px; background: none; border: none; z-index: 20; }
    </style>
</head>
<body onclick="firstClick()"> <div id="smoke-overlay"></div>

    <div class="card">
        <button class="music-ctrl" onclick="toggleMusic(event)" id="musicBtn">ğŸµ</button>

        <div class="world-clock">
            <div class="clock-item">å¤©æ´¥ (Tianjin)<b id="tj-time">00:00</b></div>
            <div class="clock-item" style="border-left: 1px solid #ccc; padding-left: 15px;">å·´æ–¯ (Bath)<b id="bath-time">00:00</b></div>
        </div>

        <div class="avatar" id="avatar"><img src="yuxuan.jpg" alt="å¤´åƒ"></div>
        <h1>æå®‡è½©</h1>
        <div class="typewriter"><span id="type-text"></span><span style="animation: blink 0.7s infinite;">|</span></div>
        
        <div>
            <span class="tag" onclick="doSmoke()">ğŸš¬ æŠ½çƒŸ</span>
            <span class="tag" onclick="doDrink()">ğŸº å–é…’</span>
            <span class="tag" onclick="doPerm()">ğŸ’‡â€â™‚ï¸ çƒ«å¤´</span>
        </div>
        
        <div class="btn-group">
            <button class="wechat-btn" onclick="showWechat()">å¾®ä¿¡è”ç³»</button>
            <button class="surprise-btn" onclick="popQuote()">æŠ•å–‚çƒŸé’±</button>
        </div>
    </div>

    <div id="modal-overlay" onclick="hideModal()">
        <div id="modal-body" style="width:80%; max-width:300px; text-align:center;"></div>
    </div>

    <audio id="bgMusic" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <script>
        const audio = document.getElementById("bgMusic");
        const btn = document.getElementById("musicBtn");

        // è§£å†³æµè§ˆå™¨ç¦éŸ³æ”¿ç­–ï¼šç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»ç½‘é¡µä»»ä½•åœ°æ–¹å³å¼€å§‹æ’­æ”¾
        function firstClick() {
            if (audio.paused) {
                audio.play();
                btn.innerHTML = "ğŸµ";
            }
        }

        function toggleMusic(e) {
            e.stopPropagation(); // é˜²æ­¢è§¦å‘ body çš„ firstClick
            if (audio.paused) {
                audio.play();
                btn.innerHTML = "ğŸµ";
            } else {
                audio.pause();
                btn.innerHTML = "ğŸ”‡";
            }
        }

        // --- é€»è¾‘ï¼šåŒåŸæ—¶é—´ ---
        function updateClocks() {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit', hour12: false };
            document.getElementById('tj-time').innerText = now.toLocaleTimeString('zh-CN', { ...options, timeZone: 'Asia/Shanghai' });
            document.getElementById('bath-time').innerText = now.toLocaleTimeString('en-GB', { ...options, timeZone: 'Europe/London' });
        }
        setInterval(updateClocks, 1000);
        updateClocks();

        // --- é€»è¾‘ï¼šäº’åŠ¨ç‰¹æ•ˆ ---
        function doSmoke() {
            const smoke = document.getElementById('smoke-overlay');
            smoke.style.opacity = '1';
            setTimeout(() => { smoke.style.opacity = '0'; }, 3000);
        }
        function doDrink() {
            document.body.classList.add('dizzy-effect');
            setTimeout(() => { document.body.classList.remove('dizzy-effect'); }, 3000);
        }
        function doPerm() {
            const avatar = document.getElementById('avatar');
            avatar.style.transform = 'rotate(360deg)';
            setTimeout(() => { avatar.style.transform = 'rotate(0deg)'; }, 800);
        }

        // --- é€»è¾‘ï¼šæ‰“å­—æœº ---
        const text = "å°±è¯»äºå¤©æ´¥å¸‚ç¬¬äº”ä¸­å­¦";
        let index = 0;
        function type() {
            if (index < text.length) {
                document.getElementById("type-text").innerHTML += text.charAt(index);
                index++; setTimeout(type, 150);
            }
        }

        // --- é€»è¾‘ï¼šéŸ³ç¬¦å¼¹å¹• ---
        window.onload = () => {
            type();
            setInterval(() => {
                const note = document.createElement('div');
                note.className = 'note';
                note.innerText = ['â™«','â™ª','â™¬'][Math.floor(Math.random()*3)];
                note.style.left = Math.random()*100+'vw';
                note.style.color = `hsl(${Math.random()*360}, 70%, 70%)`;
                document.body.appendChild(note);
                setTimeout(() => note.remove(), 4000);
            }, 600);
            // å°è¯•é™éŸ³è‡ªåŠ¨æ’­æ”¾ï¼ˆè™½æˆåŠŸç‡ä½ï¼Œä½†ä¿ç•™ï¼‰
            audio.play().catch(() => {});
        };

        const quotes = ["ğŸš¬ çƒŸå¯ä»¥ä¸æŠ½ï¼Œå¤´ä¸èƒ½ä¸çƒ«ï¼", "ğŸº å€Ÿé—®é…’å®¶ä½•å¤„æœ‰ï¼Œäº”ä¸­è·Ÿæˆ‘èµ°", "ğŸ“ å·´æ–¯æ–¯å·´çš„é›¨ï¼Œæ²¡äº”ä¸­çš„é£å¤§", "âœ¨ æ—¢ç„¶æ¥äº†ï¼Œç‚¹ä¸ªå¾®ä¿¡è”ç³»æˆ‘å§"];
        function popQuote() {
            const q = quotes[Math.floor(Math.random()*quotes.length)];
            const el = document.createElement('div');
            el.style = "position:fixed; left:50%; top:45%; transform:translate(-50%,-50%); background:rgba(0,0,0,0.8); color:white; padding:15px 25px; border-radius:50px; z-index:1000; animation: fade-out-up 2s forwards;";
            el.innerHTML = q;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        function showWechat() {
            document.getElementById('modal-body').innerHTML = `<h3>æ‰«ç è”ç³»æˆ‘</h3><img src="wechat.png" style="width:100%; border-radius:10px; background:white; padding:10px;">`;
            document.getElementById('modal-overlay').style.display = 'flex';
        }
        function hideModal() { document.getElementById('modal-overlay').style.display = 'none'; }
    </script>
</body>
</html>
